<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        body {
            padding: 0;
            margin: 0;
        }

        .grid {
            display: grid;
            border: 1px solid black;
        }

        .grid-columns {
            grid-template-columns: repeat(10, 20px);
        }

        .square {
            aspect-ratio: 1/1;
            display: flex;
            align-items: center;
            background-color: #ffffff;
            border: 1px solid black;
        }
    </style>
</head>
<body>
<div class="grid grid-columns"></div>
<script>
    window.addEventListener('resize', () => changeStylesheet(getNewData()[0], getNewData()[1]));

    function drawGrid() {
        let context = {width: window.innerWidth, colCount: 30, height: window.innerHeight * 0.8};
        context.cellSize = context.width / context.colCount;
        context.tempCount = Math.floor(context.height / context.cellSize);
        context.rowCount = context.tempCount % 2 === 1 ? context.tempCount : context.tempCount - 1;

        // ===
        context.currArr = new Array(context.rowCount);
        context.pathSearchFinished = false;

        changeStylesheet(context.colCount, context.cellSize)

        for (let row = 0; row < context.rowCount; row++) {
            context.currArr[row] = new Array(context.colCount);
            for (let col = 0; col < context.colCount; col++) {
                let rect = document.createElement('div');
                // rect.setAttribute('width', String(context.cellSize));
                // rect.setAttribute('height', String(context.cellSize));
                // rect.setAttribute('x', String(col * context.cellSize));
                // rect.setAttribute('y', String(row * context.cellSize));
                // rect.setAttribute('row', String(row));
                // rect.setAttribute('col', String(col));
                rect.setAttribute('class', 'square');
                rect.setAttribute('id', `${row}_${col}`);

                // rect.addEventListener('click', changeRectType);
                // rect.addEventListener('mouseover', changeRectType);
                // rect.addEventListener("mouseenter", dragEnter);
                // rect.addEventListener("mouseup", drop);

                document.querySelector('.grid').appendChild(rect);

                context.currArr[row][col] = rect;
            }
        }
    }

    function changeStylesheet(colCount, cellSize) {
        let style = document.styleSheets[0];
        let rules = style.cssRules || style.rules;

        Array.from(rules).filter((e) => e.selectorText === '.grid-columns')[0].style.gridTemplateColumns = `repeat(${colCount},${cellSize}px)`;
    }

    function getNewData() {
        let context = {width: window.innerWidth, colCount: 30, height: window.innerHeight * 0.8};
        context.cellSize = context.width / context.colCount;
        context.tempCount = Math.floor(context.height / context.cellSize);
        context.rowCount = context.tempCount % 2 === 1 ? context.tempCount : context.tempCount - 1;
        return [context.colCount, context.cellSize]
    }

    drawGrid();
</script>
</body>
</html>